(function(t){function e(e){for(var n,r,o=e[0],h=e[1],l=e[2],c=0,p=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var h=i[o];0!==s[h]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Univ")],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"canvas_wrap"}},[i("ul",[t._l(t.pArray,(function(e){return i("li",{key:e,class:t.pName===e?"red":"",on:{click:function(i){return t.changePlanet(e)}}},[t._v(" "+t._s(e)+" ")])})),i("li",{attrs:{id:"distance"}})],2),i("canvas",{ref:"canvas",attrs:{id:"webgl_canvas"}})])},o=[],h=i("d4ec"),l=i("bee2"),u=i("5a89"),c=function(){function t(){Object(h["a"])(this,t),this.scene=null,this.camera=null,this.spotLight=null,this.renderer=null,this.size={windowW:null,windowH:null},this.clock=null,this.time={total:null,delta:null},this.stats=null}return Object(l["a"])(t,[{key:"init",value:function(t){this.setSize(),this.scene=new u["fb"],this.camera=new u["V"](45,this.size.windowW/(.8*this.size.windowH),.01,35e4),this.camera.position.set(0,500,-500),this.camera.lookAt(this.scene.position),this.renderer=new u["tb"]({canvas:t}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.size.windowW,.8*this.size.windowH),this.light=new u["W"](16733525,3,4e5),this.light.position.set(0,0,0),this.light.castShadow=!0,this.scene.add(this.light),this.ambient=new u["b"](2236979),this.scene.add(this.ambient),this.clock=new u["k"],this.clock.start(),this.sGeo=new u["jb"](6e5,60,60),this.sMat=new u["K"]({map:(new u["mb"]).load("img/other/8k_stars_milky_way.jpg"),side:u["d"],transparent:!0,blending:u["a"]}),this.star=new u["J"](this.sGeo,this.sMat),this.scene.add(this.star)}},{key:"setSize",value:function(){this.size={windowW:window.innerWidth,windowH:window.innerHeight}}},{key:"resize",value:function(){this.setSize(),this.camera.aspect=this.size.windowW/(.8*this.size.windowH),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.windowW,.8*this.size.windowH)}},{key:"render",value:function(){this.time.delta=this.clock.getDelta(),this.time.total+=this.time.delta,this.renderer.render(this.scene,this.camera)}}]),t}(),p=new c,d=(i("b0c0"),function(){function t(e){Object(h["a"])(this,t),this.pName=e,this.texture=null,this.normalT=null,this.specularT=null,this.cloudT=null,this.planetSize={sun:109,mercury:.38,venus:.95,earth:1,moon:.27,mars:.53,jupiter:11.2,saturn:9.45,uranus:4.01,neptune:3.88},this.planetDistance={sun:1,mercury:4461,venus:8307,earth:11538,moon:29,mars:17692,jupiter:6e4,saturn:11e4,uranus:221538,neptune:346461},this.planetOrbitalPeriod={mercury:.241,venus:.615,earth:1,moon:.073,mars:4.602,jupiter:11.862,saturn:84.023,uranus:164.772,neptune:247.826},this.baseRadius=10,this.geometry=null,this.material=null,this.planet=null,this.group=new u["q"]}return Object(l["a"])(t,[{key:"init",value:function(){if(this.switchPlanetData(),this.geometry=new u["jb"](this.baseRadius,60,60),"sun"!==this.pName?this.material=new u["L"]({map:this.texture,specularMap:this.specularT,normalMap:this.normalT,normalScale:new u["qb"](30,-30)}):this.material=new u["K"]({map:this.texture}),this.planet=new u["J"](this.geometry,this.material),this.planet.name=this.pName,this.planet.scale.setScalar(this.planetSize[this.pName]),"sun"!==this.pName&&(this.planet.receiveShadow=!0,this.planet.castShadow=!0),this.group.position.setZ(this.planetDistance[this.pName]),"earth"===this.pName&&(this.cGeometry=new u["jb"](this.baseRadius+.5,60,60),this.cMaterial=new u["L"]({map:this.cloudT,transparent:!0,blending:u["a"]}),this.cloud=new u["J"](this.cGeometry,this.cMaterial),this.cloud.scale.setScalar(this.planetSize[this.pName]),this.cloud.castShadow=!0,this.group.add(this.cloud),this.mGeometry=new u["jb"](this.baseRadius,60,60),this.mMaterial=new u["L"]({map:(new u["mb"]).load("img/moon/color.jpg"),displacementMap:(new u["mb"]).load("img/moon/displacement.jpg"),displacementScale:1,displacementBias:1}),this.moon=new u["J"](this.mGeometry,this.mMaterial),this.moon.scale.setScalar(this.planetSize["moon"]),this.moon.receiveShadow=!0,this.moon.castShadow=!0,this.moon.position.setZ(this.planetDistance["moon"]),this.group.add(this.moon)),"saturn"===this.pName){var t=new u["nb"](this.baseRadius,1,2,1e3),e=new u["L"]({map:(new u["mb"]).load("img/saturn/saturn_ring_alpha.png"),opacity:.7,transparent:!0}),i=new u["J"](t,e);i.rotation.x=Math.PI/2,i.position.setY(-1),i.scale.setScalar(this.planetSize["saturn"]+10),this.group.add(i)}this.group.add(this.planet),p.scene.add(this.group)}},{key:"switchPlanetData",value:function(){switch(this.pName){case"sun":this.texture=(new u["mb"]).load("img/sun/sun.jpg");break;case"mercury":this.texture=(new u["mb"]).load("img/mercury/mercury.jpg");break;case"venus":this.texture=(new u["mb"]).load("img/venus/surface.jpg");break;case"earth":this.texture=(new u["mb"]).load("img/earth/daymap.jpg"),this.normalT=(new u["mb"]).load("img/earth/normal.jpg"),this.specularT=(new u["mb"]).load("img/earth/specular.jpg"),this.cloudT=(new u["mb"]).load("img/earth/clouds.jpg");break;case"moon":break;case"mars":this.texture=(new u["mb"]).load("img/mars/mars.jpg");break;case"jupiter":this.texture=(new u["mb"]).load("img/jupiter/jupiter.jpg");break;case"saturn":this.texture=(new u["mb"]).load("img/saturn/saturn.jpg");break;case"uranus":this.texture=(new u["mb"]).load("img/uranus/uranus.jpg");break;case"neptune":this.texture=(new u["mb"]).load("img/neptune/neptune.jpg");break;default:break}}},{key:"update",value:function(){var t=this.rotatePlanet();this.group.position.set(t.x,t.y,t.z),"earth"===this.pName&&(this.cloud.rotation.y+=.001,this.moon.position.copy(this.rotateMoon()))}},{key:"rotatePlanet",value:function(){var t=.1*p.time.total,e=Math.sin(t/this.planetOrbitalPeriod[this.pName]),i=Math.cos(t/this.planetOrbitalPeriod[this.pName]);return new u["rb"](e*this.planetDistance[this.pName],0,i*this.planetDistance[this.pName])}},{key:"rotateMoon",value:function(){var t=.1*p.time.total,e=Math.sin(t/this.planetOrbitalPeriod["moon"]),i=Math.cos(t/this.planetOrbitalPeriod["moon"]);return new u["rb"](e*this.planetDistance["moon"],0,i*this.planetDistance["moon"])}}]),t}()),m=(i("4c53"),i("34ad")),w=function(){function t(){Object(h["a"])(this,t),this.model=null,this.modelUrl="models/spaceship/model2.gltf",this.loadOK=!1,this.degree=0,this.planet=new d,this.targetPlanet="earth",this.frontVector=new u["rb"](0,0,1),this.prevVector=null,this.shipSpeed=100,this.raycaster=null,this.targetDom=document.getElementById("distance"),this.init()}return Object(l["a"])(t,[{key:"init",value:function(){var t=new m["a"],e=this;t.load(this.modelUrl,(function(t){e.model=t,p.scene.add(e.model.scene),e.model.scene.scale.setScalar(.5),e.model.scene.up.set(0,1,0),e.loadOK=!0}))}},{key:"update",value:function(t,e){if(this.loadOK)if(this.targetPlanet===t)this.targetPlanet=t,this.targetPos=e.position.clone(),this.shipPosUpdate();else{this.goToBieDePlanet(e.position.clone());var i=this.collisionDetection(e,t);i&&(this.targetPlanet=t,this.shipSpeed=100)}}},{key:"shipPosUpdate",value:function(){this.degree-=.5,this.prevVector=this.frontVector.clone();var t=this.degree+.5,e=this.targetPos.clone().add(this.getCircularMotionPosition(t));this.newPos=this.targetPos.clone().add(this.getCircularMotionPosition(this.degree)),this.model.scene.position.copy(this.newPos);var i=this.newPos.clone().sub(e).normalize().multiplyScalar(.1);this.frontVector.add(i).normalize();var n=this.frontVector.clone().negate(),s=10,a=this.targetPos.sub(this.model.scene.position).normalize();n.multiplyScalar(s).applyAxisAngle(a,Math.PI/10*Math.sin(p.time.total)).applyAxisAngle(new u["rb"](0,1,0),Math.PI/5);var r=n.add(this.model.scene.position);p.camera.position.copy(r);var o=this.model.scene.position.clone().sub(this.targetPos.clone()).normalize().multiplyScalar(3);p.camera.lookAt(this.model.scene.position.clone().add(o)),this.setQuaternion()}},{key:"getCircularMotionPosition",value:function(t){var e=this.setDistance(this.targetPlanet),i=this.planet.planetSize[this.targetPlanet]*this.planet.baseRadius+e+.05*Math.sin(p.time.total),n=t*Math.PI/180,s=i*Math.cos(n),a=0,r=i*Math.sin(n);return new u["rb"](s,a,r)}},{key:"setQuaternion",value:function(){var t=(new u["rb"]).crossVectors(this.prevVector,this.frontVector).normalize(),e=this.prevVector.dot(this.frontVector),i=Math.acos(e),n=new u["ab"];n.setFromAxisAngle(new u["rb"](t.x,t.y,t.z),i),this.model.scene.quaternion.premultiply(n)}},{key:"goToBieDePlanet",value:function(t){this.shipSpeed=this.shipSpeed>100?this.shipSpeed:this.shipSpeed+.1,this.prevVector=this.frontVector.clone();var e=this.model.scene,i=t.clone().sub(e.position).normalize();this.frontVector.add(i).normalize(),e.position.add(this.frontVector.clone().multiplyScalar(this.shipSpeed));var n=this.frontVector.clone().applyAxisAngle(new u["rb"](0,1,0),Math.PI/2),s=this.frontVector.clone().negate().applyAxisAngle(n,Math.PI/10*Math.cos(.5*p.time.total)).applyAxisAngle(new u["rb"](0,-1,0),Math.PI/10*Math.sin(p.time.total)),a=10;s.multiplyScalar(a);var r=s.add(e.position);p.camera.position.copy(r),p.camera.lookAt(e.position);var o=(new u["rb"]).crossVectors(this.prevVector,this.frontVector).normalize(),h=this.prevVector.dot(this.frontVector),l=Math.acos(h),c=new u["ab"];c.setFromAxisAngle(new u["rb"](o.x,o.y,o.z),l),e.quaternion.premultiply(c)}},{key:"collisionDetection",value:function(t,e){this.raycaster=new u["db"](this.model.scene.position,t.position.clone().sub(this.model.scene.position).normalize());var i=this.raycaster.intersectObjects(t.children);if(i.length>0){var n=i[0].distance;if(this.targetDom.innerHTML=Math.round(n),n<this.planet.planetSize[e]*this.planet.baseRadius||n<150)return!0}return!1}},{key:"setDistance",value:function(t){var e;switch(t){case"mercury":e=5;break;case"venus":case"earth":case"mars":e=10;break;case"jupiter":case"saturn":e=100;break;case"uranus":case"neptune":e=20;break;default:e=15;break}return e}}]),t}(),b=function(){function t(e){Object(h["a"])(this,t),this.props=e,this.nowPlanet="earth",this.nowPlanetPos=null,this.init()}return Object(l["a"])(t,[{key:"init",value:function(){p.init(this.props.$canvas),this.sun=new d("sun"),this.sun.init(),this.mercury=new d("mercury"),this.mercury.init(),this.venus=new d("venus"),this.venus.init(),this.earth=new d("earth"),this.earth.init(),this.mars=new d("mars"),this.mars.init(),this.jupiter=new d("jupiter"),this.jupiter.init(),this.saturn=new d("saturn"),this.saturn.init(),this.uranus=new d("uranus"),this.uranus.init(),this.neptune=new d("neptune"),this.neptune.init(),this.ship=new w,window.addEventListener("resize",this.resize.bind(this)),this.loop()}},{key:"resize",value:function(){p.resize()}},{key:"loop",value:function(){this.render(),requestAnimationFrame(this.loop.bind(this))}},{key:"render",value:function(){p.render(),this.mercury.update(),this.venus.update(),this.earth.update(),this.mars.update(),this.jupiter.update(),this.saturn.update(),this.uranus.update(),this.neptune.update(),this.ship.update(this.nowPlanet,this[this.nowPlanet].group)}},{key:"changePlanet",value:function(t){this.nowPlanet=t}}]),t}(),f={data:function(){return{pArray:["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune"],pName:"earth"}},mounted:function(){this.MyGL||(this.MyGL=new b({$canvas:this.$refs.canvas}))},methods:{changePlanet:function(t){this.pName=t,this.MyGL.changePlanet(t)}}},g=f,v=(i("8980"),i("2877")),y=Object(v["a"])(g,r,o,!1,null,"637c2869",null),P=y.exports,k={name:"App",components:{Univ:P}},j=k,M=(i("034f"),Object(v["a"])(j,s,a,!1,null,null,null)),S=M.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(S)}}).$mount("#app")},6011:function(t,e,i){},"85ec":function(t,e,i){},8980:function(t,e,i){"use strict";i("6011")}});
//# sourceMappingURL=app.ff7db95d.js.map